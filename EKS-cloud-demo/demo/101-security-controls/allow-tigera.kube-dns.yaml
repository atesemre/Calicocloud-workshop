apiVersion: projectcalico.org/v3
kind: NetworkPolicy
metadata:
  name: allow-tigera.kube-dns
  namespace: kube-system
spec:
  tier: allow-tigera
  order: 1
  selector: k8s-app == "kube-dns"
  serviceAccountSelector: ''
  ingress:
    - action: Allow
      source:
        selector: >-
          projectcalico.org/namespace in { "tigera-guardian",
          "tigera-compliance", "tigera-dex", "tigera-elasticsearch",
          "tigera-fluentd", "tigera-intrusion-detection", "tigera-kibana",
          "tigera-manager", "tigera-prometheus", "tigera-skraper",
          "tigera-system" }
        namespaceSelector: all()
      destination: {}
    - action: Pass
      source: {}
      destination: {}
  types:
    - Ingress
